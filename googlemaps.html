<!DOCTYPE html>
<html>
<head>
   	<title>Google Maps</title>
</head>
<body>
<h1>Google Maps
</h1>
<div id="map" style="width:400px; height:400px; background-color:yellow"></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js">
</script>
<script type="text/javascript">
 var openWeatherUrl="http://api.openweathermap.org/data/2.5/weather";
    var openWeatherAppId="891d6153b1132bd6b88831ea046f37b3";
function myMap()
	{
		var mapOptions={
			center:new google.maps.LatLng(51.5,-0.12),
			zoom:10,
			mapTypeId:google.maps.MapTypeId.HYBRID
		}
		var map=new google.maps.Map(document.getElementById("map"),mapOptions);
	/*    var marker=new google.maps.Marker({
	    	position:{
	    		lat:51.5,
	    		lng:-0.12
	    	},
	    	map:map,
	    	draggable:true
	    });*/
	    google.maps.event.addListener(map,"rightclick",function(event){
		var lat=event.latLng.lat();
		var lng=event.latLng.lng(); 
		getData(openWeatherUrl, lat , lng, openWeatherAppId)
		});                                                                              
}
 function getData(url, lat, lon, appId) {
    	var request=$.ajax({
    		url:url,
    		dataType:"jsonp",
    		data:{lat:lat, lon:lon, appid:appId},
    		jsonpCallback:"fetchData",
    		type:"GET"
    	});
    }
    function fetchData(weather){
    	var temp=Math.round(weather.main.temp);
    	$('#response').text(temp);
    }
/*	    var searchBox=new google.maps.places.SearchBox(document.getElementById('city-name'));
	    google.maps.event.addListener(searchBox,'places_changed,',function(){
	    	var places=searchBox.getPlaces();
	    	var bounds=new google.maps.LatLngBounds();
	    	var i,place;
	    	for(i=0;place=places[i];i++){
	    	//	console.log(place.geometry.location);
	    		bounds.extend(place.geometry.location);
	    		marker.setPosition(place.geometry.location);
	    	}
              map.fitBounds(bounds);
              map.setZoom(10);
	    });*/
 //   }
 /*   var prepareData=function(){
	var cityName=$('#city-name').val();
	if(cityName&& cityName!='')
	{
      cityName=cityName.trim();
      getData(openWeatherUrl, cityName, openWeatherAppId);
	}
	else
		alert("Please enter city name");
}
    $(document).ready(function(){
    	$('#gettemp').click(function(){
    		prepareData()
    	})
    })
    function getData(url, cityName, appId) {
    	var request=$.ajax({
    		url:url,
    		dataType:"jsonp",
    		data:{q:cityName, appid:appId},
    		jsonpCallback:"fetchData",
    		type:"GET"
    	}).fail(function(error){
    console.error(error);
    		alert("Error sending request");
    	})
    }
    function fetchData(forecast){
    	console.log(forecast);
    	var html='',
    	cityName=forecast.city.name,
    	country=forecast.city.country;
    	html+='<h3>Weather forecast for'+cityName+','+country+'</h3>';
    	forecast.list.forEach(function(forecastEntry, index, list){
    		html+='<p>'+forecastEntry.dt_txt+':'+forecastEntry.main.temp+'</p>';
    	})
    	$('#log').html(html);
    }*/
</script>
<script src ="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4_7GT2jaQiMSfv3L5DAt8FqPk_udipa4&callback=myMap";>
</script>
<input type="text" placeholder="Enter city name" id="city-name" value="" autocomplete="on">
<input type="button" name="btn_weather" value="Get temperature" id="gettemp">
<div id="response"></div>
</body>
</html>